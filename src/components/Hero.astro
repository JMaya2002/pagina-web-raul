---
---

<section class="hero" id="inicio">
    <div class="hero-waves">
        <div class="wave"></div>
        <div class="wave"></div>
    </div>

    <div class="hero-content">
        <h1>Master Clean Yatch</h1>
        <p class="hero-subtitle">Limpieza, mantenimiento y gestión profesional de embarcaciones<br>Cuidamos tu barco como si fuera nuestro</p>
        <a href="#presupuesto" class="cta-button">Solicitar Presupuesto</a>
    </div>
</section>

<script>
    // Hero fade-out on scroll
    const heroSection = document.querySelector('.hero') as HTMLElement | null;
    const heroTitle = document.querySelector('.hero h1') as HTMLElement | null;
    const heroWaves = document.querySelectorAll('.hero .wave') as NodeListOf<HTMLElement>;
    let ticking = false;

    // Optimización de rendimiento: pausar animaciones cuando el hero no es visible
    const observerOptions = {
        threshold: 0,
        rootMargin: '100px'
    };

    const heroObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            const isVisible = entry.isIntersecting;

            // Pausar/reanudar animación del título
            if (heroTitle) {
                heroTitle.style.animationPlayState = isVisible ? 'running' : 'paused';
            }

            // Pausar/reanudar animaciones de las olas
            heroWaves.forEach(wave => {
                wave.style.animationPlayState = isVisible ? 'running' : 'paused';
            });
        });
    }, observerOptions);

    if (heroSection) {
        heroObserver.observe(heroSection);
    }

    function updateHeroOpacity() {
        if (!heroSection) return;

        const scrollPosition = window.scrollY;
        const heroHeight = heroSection.offsetHeight || 0;

        const fadeStart = 200;
        const fadeEnd = heroHeight * 0.8;

        if (scrollPosition <= fadeStart) {
            heroSection.style.opacity = '1';
            heroSection.style.transform = 'translateY(0)';
            heroSection.style.pointerEvents = 'auto';
        } else if (scrollPosition >= fadeEnd) {
            heroSection.style.opacity = '0';
            heroSection.style.transform = 'translateY(-100px)';
            heroSection.style.pointerEvents = 'none';
        } else {
            const fadeProgress = (scrollPosition - fadeStart) / (fadeEnd - fadeStart);
            const opacity = 1 - fadeProgress;
            const translateY = -(fadeProgress * 100);

            heroSection.style.opacity = opacity.toString();
            heroSection.style.transform = `translateY(${translateY}px)`;
            heroSection.style.pointerEvents = opacity > 0.5 ? 'auto' : 'none';
        }

        ticking = false;
    }

    window.addEventListener('scroll', () => {
        if (!ticking) {
            window.requestAnimationFrame(() => {
                updateHeroOpacity();
            });
            ticking = true;
        }
    }, { passive: true });

    updateHeroOpacity();
</script>
